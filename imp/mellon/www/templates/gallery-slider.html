<div class="image-container"> <div class="ribbon-triangle" ng-if="prod.status==0 || prod.status==2"> <div class="ribbon-message" ng-if="prod.status==0">{{ 'DRAFT' | translate }}</div> <div class="ribbon-message" ng-if="prod.status==2">{{ 'GONE' | translate }}</div> </div> <div class="image-video default-image" ng-if="prod.defaultImage!=null"> <img ng-src="{{prod.defaultImage}}" width="100%"> </div> <ion-slides class="mln-gallery-slider" ng-if="prod.defaultImage==null && prod.media.length>1" on-slide-changed="slideHasChanged($index)" style="height:{{getMaxHeight()}}px" options="{iOSEdgeSwipeDetection: true}"> <ion-slide-page class="image-video" ng-repeat="media in prod.media" style="height:{{getMaxHeight()}}px"> <div style="padding-top:{{getMediaPadding(media)}}px"> <cl-image public-id="{{media.mediaUrl}}" class="thumbnail inline" format="jpg" secure="secure" ng-if="media.type === 'image' && media.mediaUrl!=''"> <cl-transformation width="700" crop="fill"></cl-transformation> </cl-image> <div class="video" ng-click="isIOS ? playVideo($event) : openModalProductVideo(media)" ng-if="media.type === 'video' && media.mediaUrl!=''"> <cl-image public-id="{{media.mediaUrl}}" class="thumbnail inline" format="jpg" secure="secure" resource_type="video"> <cl-transformation width="700" crop="fill"></cl-transformation> </cl-image> <span class="play"><span class="ion-ios-play"></span></span> </div> <mln-video class="full-image product-image" video-id="media.mediaUrl" ng-if="isIOS && media.type === 'video' && media.mediaUrl!=''" ng-show="false"></mln-video> </div> </ion-slide-page> </ion-slides> <div class="image-video" ng-if="prod.defaultImage==null && prod.media.length==1"> <div ng-class="{'proportional': (prod.media[0].width && prod.media[0].height)}" style="{{(prod.media[0].width && prod.media[0].height) ? 'padding-bottom:'+((prod.media[0].height*100)/prod.media[0].width | number: 2)+'%' : ''}}"> <cl-image public-id="{{prod.media[0].mediaUrl}}" class="thumbnail inline" format="jpg" secure="secure" ng-if="prod.media[0].type === 'image' && prod.media[0].mediaUrl!=''"> <cl-transformation width="700" crop="fill"></cl-transformation> </cl-image> <div class="video" ng-click="isIOS ? playVideo($event) : openModalProductVideo(prod.media[0])" ng-if="prod.media[0].type === 'video' && prod.media[0].mediaUrl!=''"> <cl-image public-id="{{prod.media[0].mediaUrl}}" class="thumbnail inline" format="jpg" secure="secure" resource_type="video"> <cl-transformation width="700" crop="fill"></cl-transformation> </cl-image> <span class="play"><span class="ion-ios-play"></span></span> </div> <mln-video class="full-image product-image" video-id="prod.media[0].mediaUrl" ng-if="isIOS && prod.media[0].type === 'video' && prod.media[0].mediaUrl!=''" ng-show="false"></mln-video> </div> </div> <div class="button-container"> <button class="button horizontal-button share-button" ng-class="{'share-button-small': showMoreButton}" ng-click="share(prod)" ion-stop-event="click">{{ 'SHARE' | translate }}</button><button ng-if="showMoreButton" class="button horizontal-button more-button" ng-click="showReportActionSheet()" ion-stop-event="click">...</button><button class="button horizontal-button product-price" ng-class="prod.transactionType.code" ng-switch on="prod.transaction_type_id" ng-click="chatOnPrice ? goToThread(prod.user_id) : ''"> <span ng-if="(prod.transaction_type_id === 1 || prod.transaction_type_id === 2) && prod.price !== null"> {{ prod.price | currency:prod.currency.symbol+' ':(Math.floor(prod.price)==prod.price ? 0 : 2) }} </span> <span class="text" ng-if="(prod.transaction_type_id === 1 || prod.transaction_type_id === 2) && prod.price === null"> {{ 'on request' | translate }} </span> <span class="text" ng-if="prod.transaction_type_id === 3 || prod.transaction_type_id === 4"> {{ 'free' | translate }} </span> </button> </div> </div>