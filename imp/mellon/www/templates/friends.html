<ion-view id="friends" view-title="{{ 'Friends' | translate }}" hide-back-button="true"> <ion-nav-title class="title-logo">{{ 'FRIENDS' | translate }}</ion-nav-title> <ion-nav-buttons side="right"> <button class="button-icon" ng-if="$parent.hasFriends && $parent.apiRequested" ng-class="$parent.$parent.invites ? 'ion-ios-personadd-outline' : 'ion-ios-personadd'" ng-click="$parent.$parent.invites = !$parent.$parent.invites"></button> </ion-nav-buttons> <div class="sub-head" ng-if="hasFriends && apiRequested" style="position:absolute; left:0; width:100%"> <div class="invite-friends text-center" ng-show="invites"> <span ng-bind-html="'Invite your friends to join Mellon.<br> More friends, more deals!' | translate"></span> <div class="button-bar invite-bar"> <a class="button horizontal-button ion-social-facebook" ng-show="hasFB" ng-click="FBinvite()"></a> <a class="button horizontal-button mellon-icon-fb-messenger" ng-show="hasFBmessenger" ng-click="FBmesssenger()"></a> <a class="button horizontal-button ion-social-whatsapp" ng-show="hasWA" ng-click="WAinvite()"></a> <a class="button horizontal-button ion-email" ng-click="MAILinvite()"></a> <a class="button horizontal-button" ng-class="isIOS ? 'ion-ios-chatbubble' : 'ion-android-textsms'" ng-click="SMSinvite()"></a> </div> </div> </div> <div> <div class="sub-head" ng-class="{'has-invite-friends':invites}"> <form ng-if="hasFriends" class="bar fixed-search-bar item-input" ng-submit="closeKeyboard()"> <input class="grey-border" type="text" ng-model="search.name" placeholder="&#xf21f; {{ 'SEARCH' | translate }}" autocorrect="off" autocapitalize="off" ng-change="searchChange();"> <i class="input-cancel ion-close" ng-show="search.name.length" ng-click="search.name = ''; searchChange();"></i> </form> <div class="friends-tabs button-bar"> <a class="button" ng-class="{'active': friendLevel==1}" ng-click="changeLevel(1)">{{ 'Friends' | translate }}<br>({{(friends[1]| filter:hasSearchName).length}})</a> <a class="button" ng-class="{'active': friendLevel==2}" ng-click="changeLevel(2)">{{ 'Friends of friends' | translate }}<br>({{(friends[2]| filter:hasSearchName).length}})</a> </div> </div> <ion-content delegate-handle="friendScroll" class="tabs-friends-list has-tabs-top" ng-class="{'has-invite-friends':invites, 'has-subheader': hasFriends}"> <ion-refresher pulling-text="{{ 'Pull to Refresh...' | translate }}" on-refresh="doRefresh()"> </ion-refresher> <ion-list> <ion-item ng-if="friends" class="item-avatar-right item-text-wrap" ng-repeat="friend in selectedFriends | filter:hasSearchName | limitTo:listLimit track by friend.id" ng-class="{'blocked-friend' : friend.in_blocked == 1 ,'padding-private private-profile-bg' : friend.visibility == 0 && friend.out_following == 0, 'first-level': friendLevel==1}" ng-click="goFriendDetail(friend.id)"> <img ng-if="!friend.avatar" src="img/avatar-placeholder.svg" ng-class="friend.visibility==0 && friend.out_following==0 ? 'avatar-opacity' : ''"> <cl-image ng-if="friend.avatar" public-id="{{friend.facebook_id ? friend.facebook_id : friend.avatar}}" ng-class="friend.visibility==0 && friend.out_following==0 ? 'avatar-opacity' : ''" format="jpg" secure="secure" type="{{friend.facebook_id ? 'facebook' : 'upload'}}"> <cl-transformation height="110" width="110" crop="fill"> </cl-image> <span ng-if="friend.visibility == 0 && (friend.out_following == 0 || friendLevel==2)" class="mellon-icon-hide over-img"></span> <span ng-if="friend.in_blocked == 1" class="mellon-icon-link over-img"></span> <div ng-if="friendLevel==1"> {{friend.name + ' ' + friend.surname}} <span ng-if="friend.visibility == 0 && friend.out_following == 0"><br>{{ 'PRIVATE PROFILE' | translate }}</span> </div> <div ng-if="friendLevel==2"> {{friend.name + ' ' + friend.surname}} <br><span ng-if="friend.visibility == 0 && friend.out_following == 0" class="second-level-private-list">{{friend.visibility==0 ? ('PRIVATE PROFILE' | translate) : ''}}</span> <div class="user-props-bar"> <span>{{ 'VIA' | translate }} </span><span class="via" ng-show="friend.friends1">{{getViaString(friend) | uppercase}}</span> </div> </div> </ion-item> <ion-item ng-if="friends.length && !selectedFriends.length && friendLevel==1" class="item-text-wrap">{{ 'None of your friends has joined Mellon (yet!). Be the cool one: invite them to join Mellon today. More Friends, More Deals.' | translate }}</ion-item> <ion-item ng-if="hasFriends && friends[1].length && !selectedFriends.length && friendLevel==2" class="item-text-wrap">{{ 'None of your friend’s friends has joined Mellon yet. Invite your friends to Mellon, spread the love.' | translate }}</ion-item> <ion-item ng-if="selectedFriends.length && !(selectedFriends | filter:hasSearchName).length" class="item-text-wrap">{{ 'Sorry, we couldn’t find any user in your network matching this search.' | translate }}</ion-item> </ion-list> <div class="nofriend-invite-friends text-center" ng-if="!hasFriends && apiRequested && user.friend_to_all==0"> <div> <div class="padding-horizontal"> <p ng-bind-html="'Mellon is based on real world relationships...<br/>but none of your friends has joined Mellon (yet)' | translate"></p> <p>{{ 'To get started you need to invite your friends to Mellon.' | translate }}</p> <p>{{ 'Invite Via:' | translate }}</p> </div> <div class="button-bar invite-bar"> <a class="button horizontal-button ion-social-facebook" ng-show="hasFB" ng-click="FBinvite()"></a> <a class="button horizontal-button mellon-icon-fb-messenger" ng-show="hasFBmessenger" ng-click="FBmesssenger()"></a> <a class="button horizontal-button ion-social-whatsapp" ng-show="hasWA" ng-click="WAinvite()"></a> <a class="button horizontal-button ion-email" ng-click="MAILinvite()"></a> <a class="button horizontal-button" ng-class="isIOS ? 'ion-ios-chatbubble' : 'ion-android-textsms'" ng-click="SMSinvite()"></a> </div> </div> </div> <ion-infinite-scroll ng-if="moreDataCanBeLoaded()" on-infinite="loadMore()"> </ion-infinite-scroll> </ion-content> </div> </ion-view>