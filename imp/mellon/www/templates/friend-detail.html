<ion-view id="friend-profile" hide-back-button="true"> <ion-nav-title class="friend-detail-title" ng-bind="friend.level == '1' ? ('FRIEND' | translate) : ('FRIEND OF FRIEND' | translate)"></ion-nav-title> <ion-nav-buttons side="left"> <button ng-click="backButton()" class="button back-button buttons button-clear header-item"> <i class="icon ion-chevron-left"></i> </button> </ion-nav-buttons> <ion-content delegate-handle="friendScroll" ng-class="friend && friend.visibility==0 && friend.out_following==0 ? 'overlay-private-profile' : ''" class="ion-content-friend-detail"> <ion-refresher pulling-text="Pull to Refresh..." on-refresh="doRefresh()"> </ion-refresher> <ion-list> <ion-item class="item item-thumbnail-right item-avatar-right" ng-class="{'blocked-friend' : friend.in_blocked == 1}"> <img ng-if="!friend.avatar" src="img/avatar-placeholder.svg"> <cl-image ng-if="friend.avatar" public-id="{{friend.facebook_id ? friend.facebook_id : friend.avatar}}" format="jpg" secure="secure" type="{{friend.facebook_id ? 'facebook' : 'upload'}}"> <cl-transformation height="140" width="140" crop="fill"> </cl-image> <span ng-if="friend.in_blocked == 1" class="mellon-icon-link over-img-detail"></span> <p>{{friend.name}} {{friend.surname}}</p> <span ng-if="!friend.conn2" class="connection_type"> {{ 'VIA' | translate }} <span class="via-first" ng-if="friend.from_friend_to_all == 1"> {{ 'MELLON' | translate }}</span> <span class="via-first" ng-if="friend.from_facebook == 1"> {{ 'FACEBOOK' | translate }}</span> <span class="via-first" ng-if="friend.from_facebook == 1 && friend.from_address_book == 1"><br><span class="via-hidden">{{ 'VIA' | translate }}</span></span> <span class="via-first" ng-if="friend.from_address_book == 1"> {{ 'PHONE CONTACTS' | translate }}</span> </span> <a ng-if="friend.conn2.length" ng-click="openVia(friend.id)" class="connections"> <i class="icon-clip"></i> <span class="via-light">{{ 'VIA' | translate }} </span><span class="via" ng-show="friend.conn2.length > 0">{{friend.conn2[0].name + ' ' + friend.conn2[0].surname| uppercase}} {{friend.conn2.length > 1 ? '+ ' +(friend.conn2.length - 1) : ''}}</span> </a> </ion-item> <div ng-if="friend.visibility == 1 || friend.visibility==0 && friend.out_following==1" class="button-bar friend-bar" ng-class="friend.conn2.length ? 'second-level-buttons' : ''"> <a ng-show="friend.conn2.length" class="button horizontal-button ask-friend" ng-click="openModalFriends(friend.id)">{{ 'ASK A FRIEND' | translate }}</a> <a class="button horizontal-button contact" ui-sref="main.messages({userId: friend.id})">{{ 'CHAT' | translate }}</a> <a class="button horizontal-button set-friend" ui-sref="main.friend-settings({friendId:friend.id})">{{ 'SETTINGS' | translate }}</a> <a class="button horizontal-button dots" ng-click="showReportActionSheet()">...</a> </div> </ion-list> <img class="overlay-private-img" ng-if="friend.visibility==0 && friend.out_following==0" src="img/overlay-private-profile.png"> <span class="overlay-private-text" ng-if="friend.visibility==0 && friend.out_following==0">{{ 'PRIVATE PROFILE' | translate }}</span> <button class="button button-block overlay-private-button" ng-if="friend.visibility==0 && friend.out_following==0" ng-click="pleaseShowProfile()">{{ 'PLEASE SHOW ME YOUR DEALS' | translate }}</button> <mln-products-wall ng-if="friend.visibility == 1 || friend.visibility==0 && friend.out_following==1" class="wall-content" ng-class="'content-' + transactionTypeSelected" show-user-info="false" show-all-count="true" popover-template="popover-profile-product"></mln-products-wall> </ion-content> </ion-view>