<ion-view class="product-detail" ng-class="product.transactionType.code" cache-view="false" hide-back-button="true"> <ion-nav-title class="title-center transaction-type" ng-class="product.transactionType.code"> {{product.transactionType.name}} </ion-nav-title> <ion-nav-buttons side="left"> <button ng-click="$ionicGoBack()" class="button back-button buttons button-clear header-item"> <i class="icon ion-chevron-left"></i> </button> </ion-nav-buttons> <ion-content ng-class="{'has-footer':!isMyProduct}"> <ion-list> <ion-item class="item item-thumbnail-right item-avatar-right product-detail"> <img ng-if="!product.user.imageUrl" src="img/avatar-placeholder.svg" ng-click="goFriendDetail(product.user.id)"> <cl-image ng-if="product.user.imageUrl" public-id="{{product.user.facebook_id ? product.user.facebook_id : product.user.imageUrl}}" format="jpg" secure="secure" type="{{product.user.facebook_id ? 'facebook' : 'upload'}}" ng-click="goFriendDetail(product.user.id)"> <cl-transformation height="140" width="140" crop="fill"> </cl-image> <p ng-class="{'first-level': isMyProduct || !userIfSecondLevel}"><span class="sold-by">{{ 'BY' | translate }}</span> <span class="name" ng-click="goFriendDetail(product.user.id)">{{ product.user.name }} {{ product.user.surname}}</span></p> <a ng-if="!isMyProduct && userIfSecondLevel" ng-click="openVia(product.user.id)" class="connections"> <i class="icon-clip"></i> <span class="via-light">{{ 'VIA' | translate }} </span><span class="via">{{friendsList[0].name + ' ' + friendsList[0].surname| uppercase}} {{friendsList.length > 1 ? '+ ' +(friendsList.length - 1) : ''}}</span> </a> </ion-item> </ion-list> <div class="product-characteristics"> <div class="item item-body product-title"> {{product.title}} <div class="product-description"> {{product.description}} <div class="hashtags-container"> <span ng-repeat="hashtag in product.hashtags"> <a ui-sref="main.wall({search: '#' + hashtag.name.replace('#', '')})">#{{hashtag.name.replace('#', '')}}</a> <span ng-if="!$last"> </span> </span> </div> </div> </div> <div class="item gallery-container"> <mln-gallery-slider prod="product" show-more-button="{{isMyProduct ? 0 : 1}}" chat-on-price="{{isMyProduct ? 0 : 1}}"></mln-gallery-slider> </div> <div class="item item-body product-category"> {{product.mainCategory.name}} > {{product.subCategory.name}} </div> <div class="item item-body product-condition"> <span class="label">{{ 'CONDITION' | translate }}</span> <span class="item-note"> {{product.condition.name}} </span> </div> <div ng-if="(product.transactionType.code=='rent' || product.transactionType.code=='lend') && product.available_from_date" class="item item-body product-payment-types"> <span class="label" ng-bind-html="'AVAILABILITY FROM<br/>TO' | translate"> </span> <span class="item-note"> {{product.available_from_date | amDateFormat:'l'}}<br>{{product.expiration_date ? (product.expiration_date | amDateFormat:'l') : ('on request')}} </span> </div> <div ng-if="product.transactionType.code!='gift' && product.transactionType.code!='lend'" class="item item-body product-payment-types"> <span class="label">{{ 'PAYMENT TYPE' | translate }}</span> <span class="item-note"> <span ng-repeat="paymentType in product.paymentTypes"><span>{{paymentType.name}}</span><br ng-if="!$last"></span> </span> </div> <div class="item item-body product-shipment-types" ng-if="product.shippingTypes.length"> <span class="label">{{ 'DELIVERY' | translate }}</span> <span class="item-note"> <span ng-repeat="shippingType in product.shippingTypes">{{shippingType.name}}{{shippingType.custom_value ? ': '+shippingType.custom_value : '' }}<br ng-if="!$last"></span> </span> </div> <div ng-if="product.location!=''" class="item item-body product-shipment-types"> <span class="label">{{ 'LOCATION' | translate }}</span> <span class="item-note"> {{product.location}} </span> </div> <div class="item item-body times"> <div class="published" ng-if="product.status!=0">{{ 'First published on' | translate }} {{product.published_on | amDateFormat:'DD/MM/YYYY'}}</div> <div class="modified" ng-if="product.status!=0 && product.published_on && product.last_user_updated_at && (product.published_on | amDateFormat:'DD/MM/YYYY') < (product.last_user_updated_at | amDateFormat:'DD/MM/YYYY')">{{ 'Last edit on' | translate }} {{product.last_user_updated_at | amDateFormat:'DD/MM/YYYY'}}</div> </div> </div> <div class="item item-body my-product-buttons" ng-if="isMyProduct"> <button ng-if="product.status==0 || product.status==1" class="button button-full button-darkbutton" ng-click="goToProductUpdate()">{{'Edit' | translate }}</button> <button ng-if="product.status==0" class="button button-full button-greenbutton" ng-click="confirmPublish()">{{ 'Publish now' | translate }}</button> <button ng-if="product.status==1" class="button button-full button-darkbutton" ng-click="confirmUnpublish()">{{ 'Delist and save as draft' | translate }}</button> <button ng-if="product.status==1" class="button button-full button-greenbutton" ng-click="confirmSetSold()">{{ 'Mark as gone' | translate }}</button> <button ng-if="product.status==2" class="button button-full button-darkbutton" ng-click="confirmUnsold()">{{ 'Make available again' | translate }}</button> <button class="button button-full button-redbutton" ng-click="confirmDelete()">{{ 'Delete' | translate }}</button> </div> </ion-content> <div class="tabs product-buttons" ng-if="!isMyProduct"> <button ng-if="(product.paymentTypes|filter:{name:'paypal'}).length > 0 && product.status == 1 && product.price>0 && !product.pendingPayment" class="button horizontal-button buy-button dark-blue" ng-class="product.transactionType.code" mln-paypal-payment ng-click="confirmMakePaypalPayment(product.id)"> {{ 'BUY' | translate }} </button> <button ng-if="(product.paymentTypes|filter:{name:'paypal'}).length > 0 && product.status == 1 && product.price>0 && product.pendingPayment" class="button horizontal-button buy-button dark-blue pending" ng-class="product.transactionType.code"> {{ 'BUY' | translate }} </button> <button ng-if="product.status == 1" class="button horizontal-button contact-button dark-blue" ng-click="goToThread(product.user_id)" translate="CHAT TO chatLabel" translate-value-chat-label="{{transactionType.chatLabel | uppercase}}"> </button> <button ng-if="product.status == 2" class="button horizontal-button contact-button dark-blue" ng-click="goToThread(product.user_id)"> {{ 'CHAT' | translate }} </button> <button ng-if="userIfSecondLevel" class="button horizontal-button ask-a-friend-button dark-blue" ng-click="openModalFriends(product.user_id)"> {{ 'ASK A FRIEND' | translate }} </button> </div> </ion-view>