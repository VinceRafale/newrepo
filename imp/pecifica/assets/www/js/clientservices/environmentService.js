var servicesModule=angular.module("environmentService",[]);servicesModule.factory("Environment",["$rootScope","$translate","$ionicPlatform","$ionicDeploy","$ionicLoading","$ionicPopup",function(n,e,i,o,t,a){function r(){l.online=!0,n.$broadcast("event:online")}function c(){l.online=!1,n.$broadcast("event:offline")}function d(){navigator&&navigator.connection&&(l.online="none"!=navigator.connection.type,l.online?r():c())}var u={serverURL:"https://app.thinkpacifica.com:443/app",websocketURL:"wss://app.thinkpacifica.com/app",gaTrackingCode:"UA-55091509-4",isDebuggable:!1,development:!1,channel:"production"},l={online:!0,appVersion:"4.0.5"};return u.isDebug=function(){return!!u.isDebuggable},u.isWeb=function(){return!1},u.isWebDebug=function(){return!1},u.isStorageAllowed=function(){return!0},document.addEventListener("online",r,!1),document.addEventListener("offline",c,!1),document.addEventListener("deviceready",d,!1),u.isOnline=function(){return l.online},u.isDevelopment=function(){return u.development},u.isIos=function(){return window.device&&window.device.platform&&"ios"==window.device.platform.toLowerCase()},u.isIPad=function(){return window.device&&window.device.model&&window.device.model.indexOf("iPad")>=0},u.isAndroid=function(){return window.device&&window.device.platform&&"android"==window.device.platform.toLowerCase()},u.getAppVersion=function(){return l.appVersion},u.getGATrackingCode=function(){return u.gaTrackingCode},u.checkForUpdate=function(n){o.setChannel(u.channel),o.check().then(function(e){n(e)},function(e){n(!1)})},u.performUpdate=function(n){window.plugins&&window.plugins.insomnia&&window.plugins.insomnia.keepAwake(),n.setUserPreference("viewed_update_popup","false"),o.setChannel(u.channel),t.show({template:e.instant("UPDATING_PACIFICA")+"<br>( 0%)"}),o.update().then(function(n){t.hide();a.alert({template:e.instant("UPDATE_SUCCESSFUL"),okText:e.instant("OK_GOT_IT"),okType:"button-default"});window.plugins&&window.plugins.insomnia&&window.plugins.insomnia.allowSleepAgain()},function(n){t.hide();a.alert({template:e.instant("UPDATE_ERROR"),okText:e.instant("OK_GOT_IT"),okType:"button-default"});window.plugins&&window.plugins.insomnia&&window.plugins.insomnia.allowSleepAgain()},function(n){var i=Math.floor(+n);10>i&&(i=" "+i),t.show({template:e.instant("UPDATING_PACIFICA")+"<br>("+i+"%)"})})},u}]);