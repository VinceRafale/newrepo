var forecastioWeather=["$q","$resource","$http","resources",function(e,t,o,i){{var n="https://api.forecast.io/forecast/"+i.FORECASTIO_KEY+"/";t(n,{callback:"JSON_CALLBACK"},{get:{method:"JSONP"}})}return{getAtLocation:function(e,t){return o.jsonp(n+e+","+t+"?callback=JSON_CALLBACK")},getForecast:function(e){},getHourly:function(e){}}}];angular.module("ionic.metApp.services",["ngResource"]).factory("Geo",["$q",function(e){return{reverseGeocode:function(t,o){var i=e.defer(),n=new google.maps.Geocoder;return n.geocode({latLng:new google.maps.LatLng(t,o)},function(e,t){if(t==google.maps.GeocoderStatus.OK){if(e.length>1){for(var o,n,a=e[1],r=[],c=!1,s=!1,l=0;l<a.address_components.length;l++){o=a.address_components[l],n=o.types;for(var d=0;d<n.length;d++)c||"locality"!=n[d]||(c=!0,r.push(o.long_name)),s||"administrative_area_level_1"!=n[d]||(s=!0,r.push(o.short_name))}i.resolve(r.join(", "))}}else i.reject(e)}),i.promise},getLocation:function(){}}}]).factory("Flickr",["$q","$resource","resources",function(e,t,o){var i="https://api.flickr.com/services/rest/",n=t(i,{method:"flickr.photos.search",user_id:"124768355@N05",tag_mode:"all",safe_search:1,jsoncallback:"JSON_CALLBACK",api_key:o.FLICKR_API_KEY,format:"json"},{get:{method:"JSONP"}});return{search:function(t,o,i){var a=e.defer();return n.get({tags:t,lat:o,lng:i},function(e){a.resolve(e)},function(e){a.reject(e)}),a.promise}}}]).factory("$localstorage",["$window",function(e){return{set:function(t,o){e.localStorage[t]=o},get:function(t,o){return e.localStorage[t]||o},setObject:function(t,o){e.localStorage[t]=JSON.stringify(o)},getObject:function(t){return JSON.parse(e.localStorage[t]||"{}")}}}]).factory("Weather",forecastioWeather).factory("metTT",function(){var e=[{id:1,icon:"icon ion-ios-location-outline",el:"met-loc",show:!1,txt:null},{id:2,icon:"icon ion-thermometer",el:null,show:!1,txt:null},{id:3,icon:"icon ion-thermometer",el:"temp",show:!0,txt:null},{id:4,icon:"icon ion-waterdrop",el:"dew",show:!0,txt:null},{id:5,icon:"icon ion-ios-speedometer-outline",el:"pressure",show:!0,txt:null},{id:6,icon:"icon ion-ios-analytics-outline",el:"winds",show:!0,txt:null},{id:7,icon:"icon",el:"weather",show:!1,txt:null},{id:8,icon:"icon",el:"weather",show:!1,txt:null},{id:9,icon:"icon ion-ios-cloudy-outline big-cloud",el:"clouds",show:!0,txt:null},{id:10,icon:"icon ion-umbrella",el:"weather",show:!1}];return{all:function(){return e}}}).factory("metTB",function(){var e=[{id:9,icon:"icon ion-ios-location-outline",el:"met-loc",show:!1,txt:null},{id:10,icon:"icon ",el:null,show:!1,txt:null},{id:11,icon:"icon ion-thermometer",el:"temp",show:!0,txt:null},{id:12,icon:"icon ion-waterdrop",el:"dew",show:!0,txt:null},{id:13,icon:"icon ion-ios-speedometer-outline",el:"pressure",show:!0,txt:null},{id:14,icon:"icon ion-ios-analytics-outline",el:"winds",show:!0,txt:null},{id:15,icon:"icon ion-thermometer",el:null,show:!1,txt:null},{id:16,icon:"icon ",el:null,show:!1,txt:null},{id:17,icon:"icon ion-ios-cloudy-outline big-cloud",el:"clouds",show:!0,txt:null}];return{all:function(){return e}}}).factory("metCodes",function(){var e=[{code:"FEW",desc:"Clear"},{code:"SCT",desc:"Partly Cloudy"},{code:"BKN",desc:"Mostly Cloudy"},{code:"OVC",desc:"Overcast"},{code:"-RA",desc:"Light Rain"},{code:"-SHRA",desc:"Light Showers"},{code:"RA",desc:"Moderate Rain"},{code:"SHRA",desc:"Moderate Showers"},{code:"+RA",desc:"Heavy Rain"},{code:"+SHRA",desc:"Heavy Showers"},{code:"TS",desc:"Thunder"},{code:"-TSRA",desc:"Light Thundershowers"},{code:"TSRA",desc:"Moderate Thundershowers"},{code:"+THRA",desc:"Heavy Thundershowers"},{code:"FC",desc:"Funnel Cloud"},{code:"BR",desc:"Mist"},{code:"FG",desc:"Fog"},{code:"FU",desc:"Partly Cloudy"},{code:"HZ",desc:"Haze"},{code:"SQ",desc:"Squall"},{code:"VCSH",desc:"Rain in various areas"},{code:"CAVOK",desc:"Fair"}];return{all:function(){return e}}}).factory("Radars",function(){var e=[{id:0,img:" ",title:"Radar Loop",sub:"Loops all radar scans.",cat:null},{id:1,img:"app/services/radar/eht7.png",title:"EHT (Echo Height Top)",sub:"Gives a representation of the height to which the top of the clouds extend.",cat:150,code:"150eht"},{id:2,img:"app/services/radar/hwind7.png",title:"HWIND (Horizontal Wind)",sub:"Shows wind flow at a specific altitude.",cat:150,code:"150hwind"},{id:3,img:"http://190.58.130.190/web/aviation/RadarPages2014/150km/max7.png",title:"MAX (Maximum)",sub:"Shows a 2 Dimensional (2D) flow for the horizontal and vertical profile of the clouds.",cat:150,code:"150max"},{id:5,img:"app/services/radar/ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:150,code:"150ppi"},{id:6,img:"app/services/radar/sri7.png",title:"SRI (Surface Rainfall Intensity)",sub:"An estimate of rainfall intensity associated with different echoes.",cat:150,code:"150sri"},{id:7,img:"app/services/radar/vvp7.png",title:"VVP (Velocity Volume Processing)",sub:"Provides an estimate of the wind profile up to a certain height.",cat:150,code:"150vvp"},{id:8,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/eht1.png",title:"EHT(Echo Height Top)",sub:"Gives a representation of the height to which the top of the clouds extend.",cat:250,code:"250eht"},{id:9,img:"",title:"",sub:"",cat:0},{id:10,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/hwind7.png",title:"HWIND (Horizontal Wind)",sub:"Shows wind flow at a specific altitude.",cat:250,code:"250hwind"},{id:11,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/max7.png",title:"MAX (Maximum)",sub:"Shows a 2 Dimensional (2D) flow for the horizontal and vertical profile of the clouds.",cat:250,code:"250max"},{id:12,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:250,code:"250ppi"},{id:13,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/sri7.png",title:"SRI (Surface Rainfall Intensity)",sub:"An estimate of rainfall intensity associated with different echoes.",cat:250,code:"250sri"},{id:14,img:"http://190.58.130.190/web/aviation/RadarPages2014/200km/vvp7.png",title:"VVP (Velocity Volume Processing)",sub:"Provides an estimate of the wind profile up to a certain height.",cat:250,code:"250vvp"},{id:15,img:"http://190.58.130.190/web/aviation/RadarPages2014/400km/400ppi7.png",title:"PPI (Plan Position Indicator)",sub:"A representation of the cloud echoes in a horizontal plane.",cat:400,code:"400ppi"},{id:16,img:null,title:"Satellite",sub:"whose orbit is circular and lies above the Equator of the Earth.",cat:null,code:"geo"}];return{all_of_cat:function(t){for(var o=[],i=0;i<e.length;i++)e[i].cat===parseInt(t)&&o.push(e[i]);return o},get:function(t){for(var o=0;o<e.length;o++)if(e[o].id===parseInt(t))return e[o];return null}}}).service("weatherHelperService",["$http","$q","$rootScope","$localstorage",function(e,t,o,i){var n=this;return n.am_pm_to_hours=function(e,t){e=e.replace(".",":"),e=e.replace(" ",""),e=e.replace("AM","am"),e=e.replace("PM","pm");var o=e.slice(-2);e=e+"_"+o,e=e.replace(":","_");var i=e.split("_");e=i[0]+":"+i[1]+" "+i[2];var n=Number(e.match(/^(\d+)/)[1]),a=Number(e.match(/:(\d+)/)[1]),r=e.match(/\s(.*)$/)[1];("pm"==r||"PM"==r)&&12>n&&(n+=12),"am"!=r&&"AM"!=r||12!=n||(n-=12);var c=n.toString(),s=a.toString();return 10>n&&(c=c),10>a&&(s=s),t?"hour"==t?parseInt(c):"minute"==t?parseInt(s):void 0:c+""+s},n.timeOfDay=function(){var e=i.getObject("fcast"),t=n.am_pm_to_hours(e.sunset,"hour"),o=n.am_pm_to_hours(e.sunset,"minute"),a=new Date,r=a.getHours(),c=a.getMinutes(),s="";return r>=0&&12>r&&(s="morning"),r>=12&&t>r&&(s="mid day"),r>=t&&o>=c&&19>r&&(s="evening"),r>=19&&(s="night"),r>=0&&12>r&&("05:30PM"==e.forecastTime||"05:30pm"==e.forecastTime||"05.30PM"==e.forecastTime||"05.30pm"==e.forecastTime)&&(s="night"),s},n.capFLetter=function(e){var t=e,o=e.split(" "),i=1,n=t;return o[0]||(n=o[1],i=2),n.charAt(0).toUpperCase()+e.slice(i).toLowerCase()},{am_pm_to_hours:function(e,t){return n.am_pm_to_hours(e,t)},set_dew_point:function(e,t){var o=t[e].value,i=/([0-9\.]+)%/g;return(r=i.exec(o))[0]},cTemp:function(e){var t="";return(29>e&&"night"!=n.timeOfDay()||23>e&&"night"==n.timeOfDay)&&(t="cool "+("night"!=n.timeOfDay()?"day":"night")),(e>=29&&31>=e&&"night"!=n.timeOfDay()||e>=23&&26>=e&&"night"==n.timeOfDay())&&(t="warm "+("night"!=n.timeOfDay()?"day":"night")),(e>=32&&34>=e&&"night"!=n.timeOfDay()||e>=27&&29>=e&&"night"==n.timeOfDay())&&(t="hot "+("night"!=n.timeOfDay()?"day":"night")),(e>34&&"night"!=n.timeOfDay()||e>29&&"night"==n.timeOfDay())&&(t="very hot "+("night"!=n.timeOfDay()?"day":"night")),t},timeOfDay:function(){return n.timeOfDay()},cWind:function(e){var t="",o=e;e=e.substring(e.lastIndexOf("(")+1,e.lastIndexOf(";")),e=parseInt(e);var i=(1.15077945*e).toFixed(0)+" MPH",a=o.split("(",1)+"at "+i;return e>=0&&3>=e&&(t="Calm/Still winds coming "+a),e>=4&&10>=e&&(t="Gentle breeze "+a),e>=11&&16>=e&&(t="Moderate breeze "+a),e>=17&&21>=e&&(t="Windy breeze "+a),e>=22&&27>=e&&(t="Strong Winds "+a),e>=28&&33>=e&&(t="Very Strong Winds "+a),e>=34&&62>=e&&(t="Storm Force Winds "+a),e>63&&(t="Hurricane force winds "+a),isNaN(e)&&(t=n.capFLetter(o)),t},capFLetter:function(e){return n.capFLetter(e)},my_date:function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=new Date,i=o.getDate()+"th";if(1==o.getDate())var i=o.getDate()+"st";if(2==o.getDate())var i=o.getDate()+"nd";if(3==o.getDate())var i=o.getDate()+"rd";if(31==o.getDate())var i=o.getDate()+"st";return[t[o.getDay()],i,e[o.getMonth()],o.getFullYear()]},getAverageRGB:function(e,t){var o,i,n,a,r=5,c=document.createElement("canvas"),s=c.getContext&&c.getContext("2d"),l=-4,d={r:0,g:0,b:0},u=0,h=0;if(!s)return defaultrgb;for(n=c.height=e.naturalHeight||e.offsetHeight||e.height,i=c.width=e.naturalWidth||e.offsetWidth||e.width,s.drawImage(e,0,0),o=s.getImageData(0,0,i,n),a=o.data.length;(l+=4*r)<a;)++u,d.r+=o.data[l],d.g+=o.data[l+1],d.b+=o.data[l+2],h+=.34*d.r+.5*d.g+.16*d.b,0!==h&&(h/=2);if(h>.5);else;d.r=~~(d.r/u),d.g=~~(d.g/u),d.b=~~(d.b/u)},timeOfDaySimple:function(){var e=new Date,t=e.getHours(),o="";return t>=0&&12>t?o="morning":t>=12&&18>t?o="mid day":19>t?o="evening":t>=19&&(o="night"),o}}}]).service("IonicClosePopupService",[function(){var e,t=angular.element(document.querySelector("html"));t.on("click",function(t){"HTML"===t.target.nodeName&&e&&e.close()}),this.register=function(t){e=t}}]);